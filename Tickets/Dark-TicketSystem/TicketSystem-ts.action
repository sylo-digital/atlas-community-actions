{
  "meta": "Exported from https://atlas.bot",
  "flags": {
    "ttl": 0,
    "cooldown": 0,
    "enabled": true,
    "silent": false,
    "delete": false,
    "quiet": false
  },
  "restrictions": {
    "mode": "whitelist",
    "roles": [],
    "channels": [],
    "permissions": []
  },
  "trigger": {
    "type": "label",
    "content": "ts"
  },
  "content": [
    {
      "fallback": true,
      "type": "channel",
      "message": "{if;{args};\n{if;{settings;plugins.tickets.state};==;enabled;\n\n{if;{or;{if;{user.roles};includes;{settings;plugins.tickets.options.support};yes};{if;{user.id};==;{guild.ownerID};yes}};==;yes;\n\n{if;{lower;{args;1}};==;status;\n\n{set;catch;{catch;{perget;{user.id;{args;2}}-ts};{perget;{user.id}-ts}}}\n{set;status;{if;{get;catch};!==;{find;{get;catch};Blacklisted|Ticket Opened};No Ticket;{get;catch}}}\n\n{channel.send;{a!ae;--field1name=\"Ticket Status\";--field1value=\"{get;status}\";--field1inline;--field2name=\"Reference\";--field2value=\"{if;{get;status};==;No Ticket;This user is able to open a ticket.;{if;{get;status};==;Blacklisted;This user is Blacklisted, not able to open tickets.;{if;{get;status};==;Ticket Opened;This user has an active ticket.}}}\";--field2inline;--title=\"{catch;{user.tag;{args;2}};{user.tag}}\";--color=\"{catch;{user.color;true;{args;2}};{user.color;true}}\";--icon=\"{catch;{user.avatarURL;{args;2}};{user.avatarURL}}\";--footer=\"Requested by {user.tag}\";--footer-icon=\"{user.avatarURL}\";--timestamp=\"true\";--description=\"{emoji.char;ballot_box} Displaying status for user: {catch;{user.mention;{args;2}} (`{user.id;{args;2}}`);{user.mention} ({user.id})}\"}};\n\n{if;{lower;{args;1}};==;set;\n\n{if;{lower;{args;3}};==;open;\n{if;{utils.isSnowflake;{user.id;{args;2}}};\n{channel.send;{a!ae;--field1name=\"New Status\";--field1value=\"Ticket Opened\";--field1inline;--field2name=\"Reference\";--field2value=\"This user will get registered as they have an active ticket.\";--field2inline;--color=\"#70d775\";--icon=\"{user.avatarURL;{args;2}}\";--name=\"{user.tag;{args;2}}\";--footer=\"Set by {user.tag}\";--footer-icon=\"{user.avatarURL}\";--timestamp=\"true\";--description=\"{emoji.char;white_check_mark} Successfully set status for user: {user.mention;{args;2}} (`{user.id;{args;2}}`)\"}}\n\n{perset;{user.id;{args;2}}-ts;Ticket Opened};\n{channel.send;{a!ae;--color=\"#fe4a49\";--name=\"Error: No valid user\";--timestamp=\"true\";--description=\"Oops! Could not find a matching user, make sure you are providing a valid user.\"}}\n};\n\n{if;{lower;{args;3}};==;no-ticket;{if;{utils.isSnowflake;{user.id;{args;2}}};\n{channel.send;{a!ae;--field1name=\"New Status\";--field1value=\"No Ticket\";--field1inline;--field2name=\"Reference\";--field2value=\"This user will get registered as they are able to open a ticket.\";--field2inline;--color=\"#70d775\";--icon=\"{user.avatarURL;{args;2}}\";--name=\"{user.tag;{args;2}}\";--footer=\"Set by {user.tag}\";--footer-icon=\"{user.avatarURL}\";--timestamp=\"true\";--description=\"{emoji.char;white_check_mark} Successfully set status for user: {user.mention;{args;2}} (`{user.id;{args;2}}`)\"}} \n\n{perset;{user.id;{args;2}}-ts};\n{channel.send;{a!ae;--color=\"#fe4a49\";--name=\"Error: No valid user\";--timestamp=\"true\";--description=\"Oops! Could not find a matching user, make sure you are providing a valid user.\"}}\n};\n\n{if;{lower;{args;3}};==;blacklisted;{if;{utils.isSnowflake;{user.id;{args;2}}};\n\n{channel.send;{a!ae;--field1name=\"New Status\";--field1value=\"Blacklisted\";--field1inline;--field2name=\"Reference\";--field2value=\"This user will get registered as they are not be able to open tickets.\";--field2inline;--color=\"#70d775\";--icon=\"{user.avatarURL;{args;2}}\";--name=\"{user.tag;{args;2}}\";--footer=\"Set by {user.tag}\";--footer-icon=\"{user.avatarURL}\";--timestamp=\"true\";--description=\"{emoji.char;white_check_mark} Successfully set status for user: {user.mention;{args;2}} (`{user.id;{args;2}}`)\"}} \n\n{perset;{user.id;{args;2}}-ts;Blacklisted};\n{channel.send;{a!ae;--color=\"#fe4a49\";--name=\"Error: No valid user\";--timestamp=\"true\";--description=\"Oops! Could not find a matching user, make sure you are providing a valid user.\"}}\n};{a!ae;--color=\"#fe4a49\";--name=\"Error: No valid status\";--timestamp=\"true\";--description=\"Oops! Could not find a matching status to set, make sure you are spelling it right. \\n\\n*Need help?*\\nGet a references list with `{guild.prefix}ts references`\"}}}};\n\n{if;{lower;{args;1}};==;setup;\n {if;{user.id};!==;{guild.ownerID};{channel.send;{a!ae;--title=\"Insufficient Permissions\";--color=\"#fe4a49\";--footer=\"No Permission\";--timestamp=\"true\";--description=\"{emoji.char;x} You do not have the required permissions to use this subcommand! You must be {user.mention;{guild.ownerID}} (Server Owner), if you wish to execute this subcommand, this is to prevent abuses.\"}};\n \n {channel.send;{a!ae;--title=\"Information Channel\";--color=\"#909cc2\";--icon=\"https://cdn.discordapp.com/emojis/573668244746141696.png?v=1\";--name=\"Setup Prompt\";--footer=\"This prompt will automatically cancel in 5 minutes\";--timestamp=\"true\";--description=\"What is the ID of the channel Atlas should send its message to? \\n\\nThis message is the one that contains information about how to open the ticket information, the reaction, and other information. **Remember**, this channel must have the `Send Messages` permission for the @everyone role denied, and for the Reason Role checked/allowed.\\n\\n*Why this?*\\nIt is to keep your channel organized, Atlas displays the how to open a ticket message. If you react, it gives you the Reason role, you set, and let you state a ticket reason with a prompt series, once done, it deletes all the messages and creates the ticket. Voila!\\n\\nSay **cancel** to cancel.\"}}\n \n{set;channelID;{channel.awaitMessage;{user.id};300}}\n{if;{lower;{get;channelID}};==;cancel;{channel.send;**Cancelled Prompt.**};\n{if;{lower;{get;channelID}};==;;{channel.send;**Cancelled prompt:** timeout (300s)};\n{if;{utils.isSnowflake;{channel.id;{get;channelID}}};==;false;{channel.send;{a!ae;--title=\"Setup Error\";--color=\"#F52323\";--description=\"The channel ID you provided me is incorrect! Please make sure you're actually using a **channel** ID. The setup process has been canceled.\\n\\nUse `{guild.prefix}ts setup` to start again.\"}};\n\n{channel.send;{a!ae;--title=\"Redirect Channel\";--color=\"#909cc2\";--icon=\"https://cdn.discordapp.com/emojis/573668244746141696.png?v=1\";--name=\"Setup Prompt\";--footer=\"This prompt will automatically cancel in 5 minutes\";--timestamp=\"true\";--description=\"What is the channel ID of your redirect channel?\\n\\nAtlas will redirect some native commands responses here.\\n\\n*Why this?*\\nThe redirect channel is used to send Atlas' native commands responses to a hidden channel, and send a custom response, for example: when reacting to open a ticket, and opening a ticket, Atlas redirects the normal message to this hidden channel and send its custom response.\\n\\nSay **cancel** to cancel.\"}}\n\n{set;redirectChannel;{channel.awaitMessage;{user.id};300}}\n{if;{lower;{get;redirectChannel}};==;cancel;{channel.send;**Cancelled Prompt.**};\n{if;{lower;{get;redirectChannel}};==;;{channel.send;**Cancelled prompt:** timeout (300s)};\n{if;{utils.isSnowflake;{channel.id;{get;redirectChannel}}};==;false;{channel.send;{a!ae;--title=\"Setup Error\";--color=\"#F52323\";--description=\"The channel ID you provided me is incorrect! Please make sure you're actually using a **channel** ID. The setup process has been canceled.\\n\\nUse `{guild.prefix}ts setup` to start again.\"}};\n\n{channel.send;{a!ae;--title=\"Reason Role\";--color=\"#909cc2\";--icon=\"https://cdn.discordapp.com/emojis/573668244746141696.png?v=1\";--name=\"Setup Prompt\";--footer=\"This prompt will automatically cancel in 5 minutes\";--timestamp=\"true\";--description=\"What is the ID of the reason role?\\n\\nThe reason role is the one given to the user when they react to state a reason. Once done, it gets removed so they do not chat there.\\n\\n*Why this?*\\nAtlas is not able to manage channel permissions at this moment, so, our workaround is having a role that will be able to chat in your *information channel* when they react.\\n\\nSay **cancel** to cancel.\"}}\n\n{set;reasonRole;{channel.awaitMessage;{user.id};300}}\n{if;{lower;{get;reasonRole}};==;cancel;{channel.send;**Cancelled Prompt.**};\n{if;{lower;{get;reasonRole}};==;;{channel.send;**Cancelled prompt:** timeout (300s)};\n{if;{utils.isSnowflake;{role.id;{get;reasonRole}}};==;false;{channel.send;{a!ae;--title=\"Setup Error\";--color=\"#F52323\";--description=\"The role ID you provided me is incorrect! Please make sure you're actually using a **role** ID. The setup process has been canceled.\\n\\nUse `{guild.prefix}ts setup` to start again.\"}};\n\n{channel.send;{a!ae;--field1name=\"Information Channel\";--field1value=\"{channel.mention;{get;channelID}}\";--field1inline;--field2name=\"Redirect Channel\";--field2value=\"{channel.mention;{get;redirectChannel}}\";--field2inline;--field3name=\"Reason Role\";--field3value=\"{role.mention;{get;reasonRole}}\";--field3inline;--field4name=\"Note\";--field4value=\"If you provided the wrong channel(s)/role, you have to run the setup command again.\";--field4inline;--title=\"Completed\";--color=\"#909cc2\";--icon=\"https://cdn.discordapp.com/emojis/573668244746141696.png?v=1\";--name=\"Setup Prompt\";--footer=\"Finishing the setup...\";--timestamp=\"true\";--description=\"Successfully retrieved all the information you provided me. Please give me a few seconds while I save your settings and set up other things.\"}}\n\n{channel.send;{a!ae;--title=\"Get in contact with our support team\";--color=\"#909cc2\";--name=\"ðŸŽ« Ticket System\";--footer=\"React below to open a ticket\";--footer-icon=\"https://tinyurl.com/4v446jeb\";--timestamp=\"true\";--description=\"{guild.name} uses a simple ticket system to let users open one ticket, and get in contact with our moderators/support team.\\n\\nOpen a ticket reacting to ðŸŽ«, below this message, you will be able to chat here for a second, state a ticket reason, and your ticket will get created. **If you do not state a reason, your ticket creation will get cancelled.**\\n\\n*It is not working!*\\nAre you reacting and nothing happens? Try opening your DM's, in case they are closed, and react again! Any useful information will get DM'ed to you. Remember that you can only open **one** ticket at the same time, you can not have two active tickets.\\n\\n*It says I am blacklisted!*\\nLooks like a member of the support role blacklisted you, you are not able to open tickets, contact a member of the support team, or a server administrator to solve this.\"};{get;channelID}}\n{sleep;0.5}\n{message.react;ticket;{channel.lastmessageID;{get;channelID}};{get;channelID}}\n{sleep;0.5}\n{perset;redirectChannel;{get;redirectChannel}}\n{perset;reasonRole;{get;reasonRole}}\n\n{channel.send;{a!ae;--timestamp=\"true\";--field1name=\"I do not see the message!\";--field1value=\"If I did not send the message to the *information channel*, make sure I had permissions to send messages there.\";--field1inline;--field2name=\"There is no reaction!\";--field2value=\"If the reaction was not added, make sure I had permissions to react to messages in the channel.\";--field2inline;--field3name=\"It is not deleting the prompts!\";--field3value=\"If I am not deleting the prompts when stating a reason, make sure I am able to manage messages in that channel.\";--field3inline;--field4name=\"Want an easier way?\";--field4value=\"Provide Atlas administrator permissions.\";--field4inline;--title=\"All done!\";--color=\"#cb9cf2\";--icon=\"https://cdn.discordapp.com/emojis/573668244746141696.png?v=1\";--name=\"Setup Completed\";--footer=\"Completed!\";--description=\"Everything should be completed. Thanks for using this action!\"}}\n \n}}}}}}}}}};\n\n{if;{lower;{args;1}};==;help;{channel.send;{a!ae;--title=\"Need a hand? Looking for the subcommands?\";--color=\"#cb9cf2\";--name=\"Ticket Help\";--footer=\"Requested by {user.tag}\";--footer-icon=\"{user.avatarURL}\";--timestamp=\"true\";--description=\"Hello! Thanks for using *Ticket System* by [dark#8901](https://discord.com/users/449245847767482379).\\nLet me provide you a list of subcommands that this super action has.\\n\\nNote: `[]` = Required. | `()` = Optional.\\nWhen using the commands **do not** add the brackets.\\n\\n`help`: Get the list of subcommands. Usage: `{guild.prefix}ts help`\\n\\n`support`: Get a list of support options if anything is wrong. Usage: `{guild.prefix}ts support`\\n\\n`references`: Get a list of references when using the `{guild.prefix}ts set [user] -> [status] <-` command. Usage: `{guild.prefix}ts references`\\n\\n`status`: Get the status of a user, or yourself. Usage: `{guild.prefix}ts status (user)`\\n\\n`set`: Set a user's status. Usage: `{guild.prefix}ts set [user] [status]`\"}};\n\n{if;{lower;{args;1}};==;references;{channel.send;{a!ae;--color=\"#909cc2\";--name=\"Status References\";--footer=\"Requested by {user.tag}\";--footer-icon=\"{user.avatarURL}\";--timestamp=\"true\";--description=\"Status references when using `{guild.prefix}ts set [user] -> [status] <-`\\n\\n`open`: Will set the user status as they have an active ticket.\\n\\n`no-ticket`: Will set the user status as able to open a ticket.\\n\\n`blacklisted`: Will set the user status as blacklisted, not able to open tickets.\"}};\n\n{if;{lower;{args;1}};==;support;{channel.send;{a!ae;--footer-icon=\"{user.avatarURL}\";--name=\"Need Support?\";--color=\"#909cc2\";--footer=\"Requested by {user.tag}\";--timestamp=\"true\";--description=\"Need a hand? Questions or concerns? Do not hesitate anymore, get in contact with us to get help/assistance, join Atlas' support server and/or contact the creator.\\n\\n__Useful links__:\\n\\n`Atlas Status`: [Click Here](https://atlas.bot/status)\\n\\n`Atlas Support Server`: [Click Here](https://discord.gg/4HWswAxfcP)\\n\\n`(Super)Action Creator`: [Click Here](https://discord.com/users/449245847767482379)\\n\\n`Atlas Community Actions Repository`: [Click Here](https://github.com/sylo-digital/community-actions)\"}};\n\n{channel.send;{a!ae;--color=\"#fe4a49\";--name=\"Error: Invalid argument\";--footer-icon=\"{user.avatarURL}\";--description=\"The argument you provided is not a valid subcommand.\\n\\n*Need help?*\\nUse `{guild.prefix}ts help` to get the list of subcommands.\"}}}}}}}};\n\n{channel.send;{a!ae;--color=\"#fe4a49\";--name=\"Insufficient Permissions\";--description=\"You do not have the required permissions to use this command. You must be in the {catch;{role.mention;{settings;plugins.tickets.options.support}} role if you wish you execute this subcommands and other subcommands.;Error: No support role set. (Navigate to your dashboard, tickets plugin, and set a support role)}\"}}};\n\n{channel.send;{a!ae;--color=\"#fbb13c\";--name=\"Plugin Disabled\";--description=\"Oops! The tickets plugin is disabled on this guild, please enable it through your dashboard and run this command again. Your dashboard: [Click Here](https://atlas.bot/guilds/{guild.id})\"}}};{channel.send;{a!ae;--title=\"You seem a bit lost!\";--color=\"#cb9cf2\";--timestamp=\"true\";--description=\"Give a try to `{guild.prefix}ts help` to get the commands list!\"}}}",
      "id": "604a1ee39104ed002ece789c"
    }
  ],
  "formatVersion": "1.2"
}